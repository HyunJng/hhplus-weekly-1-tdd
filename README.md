# ν¬μΈνΈ κ΄€λ¦¬ μ„λΉ„μ¤ - TDD κ³Όμ 

## π“ λ©ν‘

- ν¬μΈνΈ μ¶©μ „, μ‚¬μ©, μ΅°ν κΈ°λ¥μ„ κµ¬ν„ν•λ‹¤.
- λ„λ©”μΈ μ¤‘μ‹¬μ μ„¤κ³„μ™€ ν…μ¤νΈ μ£Όλ„ κ°λ°(TDD)λ΅ κΈ°λ³Έ κΈ°λ¥μ„ μ™„μ„±ν•λ‹¤.
- μ •μ±…(μ μ•½ μ΅°κ±΄)μ„ λ°μν•μ—¬ μμ™Έ μƒν™©λ„ ν…μ¤νΈν•λ‹¤.

---

## π§Ύ κΈ°λ¥ κ°μ”

| κΈ°λ¥ | μ„¤λ… |
|------|------|
| ν¬μΈνΈ μ΅°ν | νΉμ • μ μ €μ ν„μ¬ ν¬μΈνΈ μ΅°ν |
| μ¶©μ „ λ‚΄μ—­ μ΅°ν | νΉμ • μ μ €μ μ¶©μ „/μ‚¬μ© μ΄λ ¥ λ¦¬μ¤νΈ μ΅°ν |
| ν¬μΈνΈ μ¶©μ „ | νΉμ • μ μ €μ ν¬μΈνΈλ¥Ό μ¶©μ „ |
| ν¬μΈνΈ μ‚¬μ© | νΉμ • μ μ €μ ν¬μΈνΈλ¥Ό μ‚¬μ© |

---

## π§© ν¬μΈνΈ μ •μ±…

### β… κ³µν†µ
- μ¶©μ „/μ‚¬μ© μ΄λ ¥μ€ λ΅κ·Έ ν…μ΄λΈ”μ— λ°λ“μ‹ κΈ°λ΅λμ–΄μ•Ό ν•λ‹¤.

### β… μ¶©μ „ μ •μ±…
- μµμ† μ¶©μ „ κΈμ•΅: **1000μ› μ΄μƒ**
- μµλ€ 1ν μ¶©μ „ κΈμ•΅: **10000μ› μ΄ν•**
- μµλ€ λ³΄μ  ν¬μΈνΈ: **100000μ›**

### β… μ‚¬μ© μ •μ±…
- μµμ† μ‚¬μ© κΈμ•΅: **1000μ› μ΄μƒ**
- λ³΄μ  ν¬μΈνΈ μ ν•: **10000μ› μ΄μƒ** μ΅΄μ¬ν•΄μ•Ό μ‚¬μ© κ°€λ¥
- λ³΄μ  ν¬μΈνΈλ³΄λ‹¤ ν° κΈμ•΅ μ‚¬μ© μ‹ μ‹¤ν¨

---

## π§ ν…μ¤νΈ μ „λµ

### λ‹¨μ„ ν…μ¤νΈ
- λ„λ©”μΈ κ°μ²΄(Point)μ μƒνƒ λ³€κ²½ λ©”μ„λ“ ν…μ¤νΈ
- μ •μ±…(ChargingPolicy, UsagePolicy) κ²€μ¦
- PointService λ‚΄λ¶€ νλ¦„ ν…μ¤νΈ
- PointControlle μ”μ²­κ³Ό μ‘λ‹µ ν…μ¤νΈ 
---

## β… μ£Όμ” ν…μ¤νΈ μ‹λ‚λ¦¬μ¤

### ν¬μΈνΈ μ΅°ν

- μ μ €κ°€ μμ‹ μ ν¬μΈνΈλ¥Ό μ΅°νν•  μ μλ‹¤

### ν¬μΈνΈ μ¶©μ „

- μ μ €λ” 1000μ› μ΄μƒ 10000μ› μ΄ν•λ¥Ό μ¶©μ „ν•  μ μλ‹¤
- μ¶©μ „ ν›„ ν¬μΈνΈ λ΅κ·Έκ°€ μ μ¬λλ‹¤
- μµλ€ λ³΄μ  κΈμ•΅(10λ§μ›)μ„ μ΄κ³Όν•λ” μ¶©μ „μ€ μ‹¤ν¨ν•λ‹¤
- 1000μ› λ―Έλ§ λλ” 10000μ› μ΄κ³Ό μ¶©μ „μ€ μ‹¤ν¨ν•λ‹¤

### ν¬μΈνΈ μ‚¬μ©

- μ μ €λ” 1000μ› μ΄μƒμ„ μ‚¬μ©ν•  μ μλ‹¤
- λ³΄μ  ν¬μΈνΈλ³΄λ‹¤ ν° κΈμ•΅μ„ μ‚¬μ©ν•λ ¤ ν•λ©΄ μ‹¤ν¨ν•λ‹¤
- μ‚¬μ© ν›„ ν¬μΈνΈ λ΅κ·Έκ°€ μ μ¬λλ‹¤

---

## π” λ™μ‹μ„± ν…μ¤νΈ (Step 2 μ‚¬μ „ μ„¤κ³„ ν¬ν•¨)

- μ—¬λ¬ μ“°λ λ“κ°€ λ™μ‹μ— μ¶©μ „/μ‚¬μ© μ”μ²­ μ‹:
    - **λ™μ‹μ„± μ΄μ μ—†μ΄ μ •ν™•ν•κ² λ°μλμ–΄μ•Ό ν•¨**
    - **μ΄ λ³΄μ  ν¬μΈνΈλ” λΉ„μ¦λ‹μ¤ μ μ•½μ„ μ΄κ³Όν•μ§€ μ•μ•„μ•Ό ν•¨**
    - `Executors + CountDownLatch` κΈ°λ° ν…μ¤νΈ μ„¤κ³„ μ™„λ£

---

## π—‚ λ””λ ‰ν† λ¦¬ κµ¬μ΅° (μ”μ•½)

```
point/
β”β”€controller
β”‚  β”‚  PointController.java
β”‚  β”‚
β”‚  β””β”€dto
β”‚          PointDto.java
β”‚          PointLogDto.java
β”‚
β”β”€domain
β”‚  β”β”€model
β”‚  β”‚      Point.java
β”‚  β”‚      PointLog.java
β”‚  β”‚      TransactionType.java
β”‚  β”‚
β”‚  β””β”€policy
β”‚          ChargingPolicy.java
β”‚          DefaultChargingPolicy.java
β”‚          DefaultUsagePolicy.java
β”‚          UsagePolicy.java
β”‚
β”β”€infrastruction
β”‚  β”β”€adapter
β”‚  β”‚      PointRepositoryImpl.java
β”‚  β”‚
β”‚  β””β”€database
β”‚      β”‚  PointHistoryTable.java
β”‚      β”‚  UserPointTable.java
β”‚      β”‚
β”‚      β””β”€entity
β”‚              PointHistory.java
β”‚              UserPoint.java
β”‚
β””β”€service
    β”‚  PointService.java
    β”‚
    β””β”€port
            PointRepository.java
```

---

## π’΅ κΈ°νƒ€

- μ™Έλ¶€ DBλ¥Ό μ‚¬μ©ν•μ§€ μ•κ³  `Map κΈ°λ° Table ν΄λμ¤`λ¥Ό μ£Όμ…λ°›μ•„ μ‚¬μ©
- ν…μ¤νΈ μ‹κ°„ μλ„μ  λλ¤ λ”λ μ΄ (`Thread.sleep(random)`)κ°€ μμΌλ―€λ΅  
  **λ™μ‹μ„± ν…μ¤νΈ μ‹ μΌμ •ν• μ‹¤ν¨μ¨μ΄ λ°μƒν•  μ μμ** β†’ μ •μ±…μ μΌλ΅ μ μ–΄ ν•„μ”

---

## π“ μ°Έκ³  ν‚¤μ›λ“

- TDD (Test-Driven Development)
- Spring Boot, MockMvc
- JUnit5, AssertJ, Mockito
- CountDownLatch, ExecutorService (λ™μ‹μ„± μ μ–΄)

